---
import { Icon } from 'astro-icon/components';
import Image from '~/components/common/Image.astro';
import type { ImageMetadata } from 'astro';
import ActionBadge from '~/components/ui/ActionBadge.astro';
import logo_blanc from '~/assets/images/logo_ootb_white.svg';
import GradientHeroSection from './GradientHeroSection.astro';

interface Props {
  image: ImageMetadata;
}

const { image } = Astro.props;

const title = {
  line1: "La plateforme",
  line2: "des pédagogies",
  line3: "innovantes !"
};
---

<GradientHeroSection>
  <!-- Éléments décoratifs flottants -->
  <div class="absolute inset-0 overflow-hidden">
    <!-- Premier livre - Position différente sur mobile/desktop -->
    <div class="absolute w-12 md:w-16 h-20 md:h-24 -rotate-[15deg] md:-rotate-12 top-[12%] md:top-[10%] left-[8%] md:left-[40%] opacity-40 transition-transform hover:-translate-y-2 duration-1000">
      <Icon name="tabler:book-2" class="w-full h-full text-white filter drop-shadow-lg" />
    </div>
    
    <!-- Second livre - Position ajustée pour mobile -->
    <div class="absolute w-10 md:w-14 h-16 md:h-20 rotate-45 top-[30%] md:top-[40%] right-[5%] md:right-[12%] opacity-40 transition-transform hover:translate-y-2 duration-1000">
      <Icon name="tabler:book" class="w-full h-full text-white filter drop-shadow-lg" />
    </div>
  </div>

  <div class="relative z-20 grid md:grid-cols-2 gap-8 md:gap-12 items-center max-w-6xl mx-auto px-4 md:px-8 pt-12 md:pt-32 w-full">
    <div class="text-center md:text-left flex flex-col">
      <!-- Sur mobile: d'abord le logo -->
      <div class="md:hidden px-10 mb-0">
        <Image
          src={logo_blanc}
          alt="Out of the Books"
          class="w-[180px] h-auto mx-auto"
          widths={[180]}
          sizes="180px"
          loading="eager"
          decoding="async"
        />
      </div>

      <!-- Mascotte sur mobile -->
      <div class="md:hidden mb-0 px-20 py-8">
        <Image
          src={image}
          alt="Mascotte Out of the Books"
          class="w-[70px] h-auto mx-auto animate-float"
          widths={[70]}
          sizes="70px"
          loading="eager"
          decoding="async"
        />
      </div>

      <!-- Titre sur mobile -->
      <div class="md:hidden mb-8">
        <h2 class="font-body text-3xl font-light max-w-lg leading-tight mx-auto">
          <span class="text-white font-bold block mb-1">{title.line1}</span>
          <span class="text-[--ootb-yellow] relative font-bold italic block mb-1">
            <span class="relative font-bold">
              {title.line2}
              <span class="absolute bottom-0 left-0 w-[102%] h-[0.06em] bg-[--ootb-yellow] rounded-full transform -rotate-1 translate-x-[-1%]"></span>
              <span class="absolute bottom-[0.08em] left-0 w-[101%] h-[0.05em] bg-[--ootb-yellow]/70 rounded-full transform rotate-[0.5deg] translate-x-[-2%]"></span>
              <span class="absolute bottom-[-0.08em] left-0 w-[103%] h-[0.06em] bg-[--ootb-yellow]/60 rounded-full transform -rotate-[1.5deg] translate-x-[1%]"></span>
            </span>
          </span>
          <span class="text-white font-bold block">{title.line3}</span>
        </h2>
      </div>

      <!-- Logo desktop -->
      <h1 class="hidden md:block font-heading text-7xl font-bold leading-none tracking-tight mb-16">
        <Image
          src={logo_blanc}
          alt="Out of the Books"
          class="w-[400px] h-auto md:mx-0"
          widths={[400]}
          sizes="400px"
          loading="eager"
          decoding="async"
        />
      </h1>

      <!-- Sur desktop: le texte après le logo -->
      <div class="hidden md:block">
        <h2 class="font-body text-3xl md:text-5xl font-light mb-8 md:mb-16 max-w-lg leading-tight mx-auto md:mx-0">
          <span class="text-white font-bold block mb-0.5">{title.line1}</span>
          <span class="text-[--ootb-yellow] relative md:ml-6 font-bold italic block mb-0.5">
            <span class="relative font-bold">
              {title.line2}
              <span class="absolute bottom-0 left-0 w-[102%] h-[0.06em] bg-[--ootb-yellow] rounded-full transform -rotate-1 translate-x-[-1%]"></span>
              <span class="absolute bottom-[0.08em] left-0 w-[101%] h-[0.05em] bg-[--ootb-yellow]/70 rounded-full transform rotate-[0.5deg] translate-x-[-2%]"></span>
              <span class="absolute bottom-[-0.08em] left-0 w-[103%] h-[0.06em] bg-[--ootb-yellow]/60 rounded-full transform -rotate-[1.5deg] translate-x-[1%]"></span>
            </span>
          </span>
          <span class="text-white font-bold block">{title.line3}</span>
        </h2>
      </div>

      <!-- Section des badges responsive -->
      <div class="flex flex-wrap md:flex-nowrap gap-2.5 justify-center md:justify-start items-center md:relative md:mt-4 md:mb-4 md:w-full">
        <a href="/festival" class="transform hover:scale-105 transition-all duration-300">
          <ActionBadge variant="festival">
            Festival
          </ActionBadge>
        </a>
        
        <a href="/category/podcast" class="transform hover:scale-105 transition-all duration-300">
          <ActionBadge variant="podcast">
            Podcast
          </ActionBadge>
        </a>
        
        <a href="/category/tv" class="transform hover:scale-105 transition-all duration-300">
          <ActionBadge variant="emission">
            Émission
          </ActionBadge>
        </a>
        
        <a href="/appel-a-projets" class="transform hover:scale-105 transition-all duration-300">
          <ActionBadge variant="appel">
            Appel à projets
          </ActionBadge>
        </a>
      </div>

    </div>

    <div class="relative hidden md:block px-8">
      <!-- Image principale -->
      <div class="relative z-20 transform hover:-rotate-2 transition-transform duration-300">
        <Image
          src={image}
          alt="Illustration principale"
          class="w-full max-w-[600px] mx-auto object-contain h-auto"
          widths={[400, 600]}
          sizes="(max-width: 600px) 400px, 600px"
          aspectRatio="auto"
          loading="eager"
          decoding="async"
        />
      </div>
      <!-- Cercle décoratif -->
      <div class="absolute inset-0 z-10">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full bg-white/10 blur-2xl"></div>
      </div>
    </div>
  </div>

</GradientHeroSection>