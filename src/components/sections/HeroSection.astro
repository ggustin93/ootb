---
import { Icon } from 'astro-icon/components';
import Image from '~/components/common/Image.astro';
import type { ImageMetadata } from 'astro';
import ActionBadge from '~/components/ui/ActionBadge.astro';
import cloudsBg from '~/assets/images/clouds_bg.svg';

interface Props {
  title: {
    line1: string;
    line2: string;
    line3: string;
  };
  subtitle: string;
  image: ImageMetadata;
}

const {
  title = {
    line1: "La plateforme",
    line2: "des pédagogies",
    line3: "innovantes !"
  },
  subtitle = "Out of the Books est une ASBL qui connecte les acteurs éducatifs à travers événements inspirants et contenus experts.",
  image,
} = Astro.props;
---

<section class="relative min-h-[85vh] flex items-start justify-center bg-[--ootb-turquoise] bg-gradient-to-b from-[--ootb-turquoise] from-65% via-[color-mix(in_srgb,var(--ootb-turquoise)_65%,white)] via-80% to-white to-95%">
  <!-- Éléments décoratifs flottants -->
  <div class="absolute inset-0 overflow-hidden">
    <!-- Premier livre - Repositionné au milieu gauche -->
    <div class="absolute w-24 h-32 -rotate-12 top-[10%] left-[40%] opacity-30 transition-transform hover:-translate-y-2 duration-1000">
      <Icon name="tabler:book-2" class="w-full h-full text-white filter drop-shadow-lg" />
    </div>
    
    <!-- Second livre - Position ajustée en miroir -->
    <div class="absolute w-20 h-28 rotate-45 top-[40%] right-[12%] opacity-30 transition-transform hover:translate-y-2 duration-1000">
      <Icon name="tabler:book" class="w-full h-full text-white filter drop-shadow-lg" />
    </div>
  </div>

  <div class="relative z-20 grid md:grid-cols-2 gap-12 items-center max-w-6xl mx-auto px-8 pt-32 w-full">
    <div class="text-center md:text-left">
      <h1 class="font-heading text-6xl font-bold leading-none tracking-tight mb-6">
        <span class="text-white">{title.line1}</span><br/>
        <span class="text-[--ootb-yellow] relative ml-4 after:absolute after:bottom-1 after:left-0 after:w-full after:h-1 after:bg-gradient-to-r after:from-[--ootb-yellow]/50 after:to-[--ootb-yellow]/10 italic after:skew-x-[-12deg] after:transform after:blur-sm after:transition-all after:duration-300 hover:after:h-2 hover:after:blur-md">{title.line2}</span><br/>
        <span class="text-white">{title.line3}</span>
      </h1>
      <p class="font-sans text-xl text-white/90 font-light mb-12 max-w-lg">
        {subtitle}
      </p>

      <!-- Section des badges sur une seule ligne -->
      <div class="flex flex-row gap-4 justify-between">
        <a href="/festival" class="transform hover:scale-105 transition-all duration-300 flex-1">
          <ActionBadge variant="festival">
            Festival
          </ActionBadge>
        </a>
        
        <a href="/category/podcast" class="transform hover:scale-105 transition-all duration-300 flex-1">
          <ActionBadge variant="podcast">
            Podcast
          </ActionBadge>
        </a>
        
        <a href="/category/tv" class="transform hover:scale-105 transition-all duration-300 flex-1">
          <ActionBadge variant="emission">
            Émission
          </ActionBadge>
        </a>
        
        <a href="/appel-a-projets" class="transform hover:scale-105 transition-all duration-300 flex-1">
          <ActionBadge variant="appel">
            Appel à projets
          </ActionBadge>
        </a>
      </div>

    </div>

    <div class="relative hidden md:block px-8">
      <!-- Image principale -->
      <div class="relative z-20 transform hover:-rotate-2 transition-transform duration-300">
        <Image
          src={image}
          alt="Illustration principale"
          class="w-full max-w-[600px] mx-auto object-contain h-auto"
          widths={[400, 600]}
          sizes="(max-width: 600px) 400px, 600px"
          aspectRatio="auto"
          loading="eager"
          decoding="async"
        />
      </div>
      <!-- Cercle décoratif -->
      <div class="absolute inset-0 z-10">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full bg-white/10 blur-2xl"></div>
      </div>
    </div>
  </div>

  <!-- Fond de nuages -->
  <div class="absolute bottom-[5%] left-0 right-0 w-full z-0">
    <Image
      src={cloudsBg}
      alt="Fond décoratif de nuages"
      class="w-full h-auto object-cover object-bottom transform scale-105"
      widths={[1024, 2048]}
      sizes="100vw"
      aspectRatio="20:1"
      loading="eager"
      decoding="async"
    />
  </div>
</section> 