---
import { Icon } from 'astro-icon/components';
import { getHomePermalink } from '~/utils/permalinks';
import LogoWithIcon from '~/components/common/LogoWithIcon.astro';

interface Link {
  text?: string;
  href?: string;
  ariaLabel?: string;
  icon?: string;
}

interface Links {
  title?: string;
  links: Array<Link>;
}

export interface Props {
  links: Array<Links>;
  socialLinks: Array<Link>;
}

const { socialLinks = [], links = [] } = Astro.props;
---

<footer class="relative not-prose bg-gradient-to-b from-white to-[--ootb-turquoise]">
  <!-- Vague décorative -->
  <div class="absolute inset-x-0 -top-16 h-16 pointer-events-none">
    <svg 
      viewBox="0 0 1440 200" 
      class="absolute w-full h-full" 
      preserveAspectRatio="none"
      xmlns="http://www.w3.org/2000/svg"
      aria-hidden="true"
    >
      <path 
        fill="white"
        fill-opacity="1" 
        d="M0,160L34.3,144C68.6,128,137,96,206,90.7C274.3,85,343,107,411,128C480,149,549,171,617,165.3C685.7,160,754,128,823,122.7C891.4,117,960,139,1029,154.7C1097.1,171,1166,181,1234,170.7C1302.9,160,1371,128,1406,112L1440,96L1440,320L1405.7,320C1371.4,320,1303,320,1234,320C1165.7,320,1097,320,1029,320C960,320,891,320,823,320C754.3,320,686,320,617,320C548.6,320,480,320,411,320C342.9,320,274,320,206,320C137.1,320,69,320,34,320L0,320Z"
      ></path>
    </svg>
  </div>

  <div class="relative max-w-7xl mx-auto px-4 sm:px-6">
    <!-- Section principale -->
    <div class="py-16">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 mb-16">
        <!-- Logo et Description -->
        <div class="lg:col-span-5 space-y-8">
          <div>
            <a href={getHomePermalink()} class="inline-block transition-transform hover:scale-105 duration-300">
              <LogoWithIcon size="lg" />
            </a>
          </div>
          <div class="text-gray-600 space-y-4">
            <p class="max-w-md leading-relaxed">
              Out of the Books connecte et inspire les acteurs du changement éducatif en Francophonie. Notre festival et nos contenus créent des espaces d'échange pour réinventer l'éducation.
            </p>
          </div>
        </div>

        <!-- Navigation 3 colonnes -->
        <div class="lg:col-span-7 grid grid-cols-1 md:grid-cols-3 gap-8">
          {
            [links[2], links[1], links[0]].map(({ title, links }) => (
              <div class="space-y-4">
                <h3 class="text-gray-900 font-semibold text-xl tracking-wide">{title}</h3>
                {links && Array.isArray(links) && links.length > 0 && (
                  <ul class="space-y-3">
                    {links.map(({ text, href, ariaLabel }) => (
                      <li>
                        <a
                          class="text-gray-600 hover:text-[--ootb-turquoise] transition-colors duration-300"
                          href={href}
                          aria-label={ariaLabel}
                        >
                          {text}
                        </a>
                      </li>
                    ))}
                  </ul>
                )}
              </div>
            ))
          }
        </div>
      </div>
    </div>

    <!-- Séparateur -->
    <div class="h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"></div>

    <!-- Footer bottom -->
    <div class="py-8">
      <div class="flex flex-col md:flex-row justify-between items-center gap-6">
        <!-- Réseaux sociaux -->
        <div class="flex gap-5">
          {
            socialLinks.map(({ ariaLabel, href, icon }) => (
              <a
                class="w-10 h-10 flex items-center justify-center rounded-full bg-white border border-gray-100 text-gray-600 hover:bg-[--ootb-turquoise]/10 hover:text-[--ootb-turquoise] hover:border-[--ootb-turquoise]/20 hover:scale-110 transition-all duration-300"
                href={href}
                target="_blank"
                rel="noopener noreferrer"
                aria-label={ariaLabel}
              >
                {icon && <Icon name={icon} class="w-5 h-5" />}
              </a>
            ))
          }
        </div>

        <!-- Copyright -->
        <div class="text-sm text-gray-500">
          Out of the Books ASBL · Tous droits réservés © {new Date().getFullYear()}
        </div>
      </div>
    </div>
  </div>
</footer>

<style>
/* Animation subtile pour les liens */
a:not([class*="rounded-full"]) {
  position: relative;
  padding-bottom: 2px;
}

a:not([class*="rounded-full"])::after {
  content: '';
  position: absolute;
  width: 0;
  height: 1px;
  bottom: 0;
  left: 0;
  background: linear-gradient(90deg, var(--ootb-turquoise), var(--ootb-turquoise));
  opacity: 0.3;
  transition: width 0.3s ease;
}

a:not([class*="rounded-full"]):hover::after {
  width: 100%;
}
</style>
