---
import Layout from '~/layouts/PageLayout.astro';
import { Icon } from 'astro-icon/components';
import Image from '~/components/common/Image.astro';
import FestivalHeroSection from '~/components/sections/FestivalHeroSection.astro';
import SectionDivider from '~/components/ui/SectionDivider.astro';
import DayFilter from '~/components/ui/DayFilter.astro';
import { eventsByDay } from '~/data/festival';
import YouTubePlayer from '~/components/common/YouTubePlayer.astro';
import banniereFestival from '~/assets/images/banniere_festival.jpeg';
import ActionBadge from '~/components/ui/ActionBadge.astro';
import logo_festival_white from '~/assets/images/logo_festival_white.svg';
import festivalHeroImage from '~/assets/images/festival_hero.webp';
import ootbLogo from '~/assets/images/ootb-logo.svg';
import Carousel from '~/components/ui/Carousel.astro';
import Button from '~/components/ui/Button.astro';
import ScrollDownArrow from '~/components/ui/ScrollDownArrow.astro';
import ActivityCards from '~/components/sections/ActivityCards.astro';

const metadata = {
  title: 'Festival Out of the Books 2025 | La Sucrerie - Wavre',
  description: 'Découvrez le festival Out of the Books 2025, l\'événement incontournable de l\'éducation innovante.',
  canonical: 'https://outofthebooks.org/festival',
  image: {
    src: banniereFestival,
    alt: 'Festival Out of the Books 2025'
  },
  openGraph: {
    title: 'Festival Out of the Books 2025 | Innovation en Éducation',
    description: 'Trois jours dédiés à l\'innovation pédagogique',
    image: 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?q=80&w=2070',
    type: 'website',
    site_name: 'Festival Out of the Books'
  }
};

const themes = [
  {
    title: 'Pédagogies actives',
    description: 'Faire découvrir des écoles, des structures d\'aide et d\'accompagnement moins « traditionnelles » et répondant aux besoins de tous.',
    icon: 'tabler:school'
  },
  {
    title: 'La classe autrement & les besoins spécifiques',
    description: 'Faire découvrir de nouvelles approches méthodologiques à l\'aide des intelligences multiples, de la gestion mentale, de la PNL d\'apprentissage, du jeu...',
    icon: 'tabler:brain'
  },
  {
    title: 'La ludopédagogie en classe & à la maison',
    description: 'Faire découvrir des techniques d\'apprentage par le jeu. Démontrer qu\'il est possible d\'apprendre tout en jouant.',
    icon: 'tabler:puzzle'
  },
  {
    title: 'Les nouvelles technologies',
    description: 'Faire découvrir des approches innovantes pour apprendre autrement à l\'aide des nouvelles technologies.',
    icon: 'tabler:device-laptop'
  },
  {
    title: 'L\'éducation positive & le bien-être',
    description: 'Faire découvrir des outils de communication positive et de gestion efficace du stress et du harcèlement.',
    icon: 'tabler:heart'
  }
];
---

<Layout metadata={metadata}>
  <FestivalHeroSection
    id="top"
    logo={logo_festival_white}
    heroImage={festivalHeroImage}
    date="1, 2 et 3 octobre 2025"
    location="La Sucrerie - Wavre"
    description="Trois jours de conférences, d'ateliers et de rencontres pour repenser l'éducation de demain."
  >
    <ScrollDownArrow 
      targetId="features" 
      label="En savoir plus"
      position="bottom-[25%] right-[5%]"
      class="text-white"
    />
  </FestivalHeroSection>

  <!-- Cartes d'activités avec plus de chevauchement -->
  <ActivityCards 
    id="features" 
    class="-mt-40 relative z-20" 
  />

  <!-- Section Introduction -->
  <section id="about" class="pt-20 pb-16 bg-white relative">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <div class="text-center mb-16">
        <SectionDivider variant="orange" class="mb-6">
          <Icon name="tabler:bulb" class="w-5 h-5" />
          En bref
        </SectionDivider>
        <h2 class="text-4xl md:text-5xl font-body font-bold mb-6 text-sky-900">
          Le festival des pédagogies innovantes
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-12">
          Trois jours dédiés à la découverte et au partage des pratiques pédagogiques innovantes, pour repenser l'éducation de demain.
        </p>
      </div>

      <!-- Présentation en deux colonnes -->
      <div class="grid md:grid-cols-2 gap-16 items-center mb-16">
        <!-- Texte à gauche -->
        <div class="space-y-6">
          <div class="max-w-xl">
            <p class="text-lg text-gray-600 mb-6">
              Le festival Out of the Books est le rendez-vous incontournable des acteurs de l'éducation innovante. Notre mission ? Créer un espace d'échange et d'inspiration où enseignants, parents et professionnels de l'éducation peuvent découvrir, partager et s'enrichir mutuellement.
            </p>
            <p class="text-lg text-gray-600">
              Au programme : des conférences inspirantes, des ateliers pratiques, des démonstrations pédagogiques et de nombreuses opportunités de networking. Une expérience immersive unique pour explorer les pédagogies de demain.
            </p>
          </div>
        </div>

        <!-- Vidéo à droite -->
        <div class="relative aspect-video">
          <div class="absolute -inset-4 bg-black rounded-[2rem] border-2 border-[--ootb-orange] shadow-[0_0_20px_rgba(228,69,30,0.3)] transform rotate-2"></div>
          <div class="relative z-10 rounded-2xl overflow-hidden shadow-2xl transform-gpu hover:scale-[1.02] transition-transform duration-500">
            <YouTubePlayer
              videoId="D74JiIP9rtc"
              title="Festival Out of the Books 2025"
              className="w-full aspect-video"
              autoplay={false}
              muted={false}
            />
            <!-- Effet de reflet -->
            <div class="absolute -bottom-6 left-1/2 -translate-x-1/2 w-[90%] h-20 bg-gradient-to-t from-white/20 to-transparent blur-lg transform-gpu"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Galerie photos des éditions précédentes -->
  <section id="gallery" class="bg-white relative overflow-hidden">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-8 md:py-16">
        <div class="text-center">
          <SectionDivider variant="orange" class="mb-4">
            <Icon name="tabler:camera" class="w-5 h-5" />
            <span>Rétrospective</span>
          </SectionDivider>
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-body font-bold mb-4 text-sky-900">Revivez les moments forts</h2>
          <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto mb-8">
            Plongez dans l'ambiance des éditions précédentes du festival
          </p>
        </div>

        <!-- Carousel de photos -->
        <div class="w-full max-w-3xl mx-auto">
          <Carousel
            photos={[
              {
                src: "https://images.unsplash.com/photo-1540575467063-178a50c2df87?q=80&w=2070&auto=format&fit=crop",
                alt: "Conférence principale Out of The Books",
                title: "Conférence principale",
                width: 2070,
                height: 1380
              },
              {
                src: "https://images.unsplash.com/photo-1517457373958-b7bdd4587205?q=80&w=2069&auto=format&fit=crop",
                alt: "Atelier collaboratif",
                title: "Atelier collaboratif",
                width: 2069,
                height: 1380
              },
              {
                src: "https://images.unsplash.com/photo-1524178232363-1fb2b075b655?q=80&w=2070&auto=format&fit=crop",
                alt: "Stand d'éditeurs",
                title: "Stand d'éditeurs",
                width: 2070,
                height: 1380
              },
              {
                src: "https://images.unsplash.com/photo-1531496681078-27dc2277e898?q=80&w=2074&auto=format&fit=crop",
                alt: "Espace de networking",
                title: "Networking & Échanges",
                width: 2074,
                height: 1383
              },
              {
                src: "https://images.unsplash.com/photo-1544928147-79a2dbc1f389?q=80&w=2487&auto=format&fit=crop",
                alt: "Espace détente",
                title: "Espace détente & café",
                width: 2487,
                height: 1658
              },
              {
                src: "https://images.unsplash.com/photo-1559223607-a43c990c692c?q=80&w=2070&auto=format&fit=crop",
                alt: "Espace de discussion",
                title: "Discussions informelles",
                width: 2070,
                height: 1380
              },
              {
                src: "https://images.unsplash.com/photo-1558008258-3256797b43f3?q=80&w=2131&auto=format&fit=crop",
                alt: "Présentation interactive",
                title: "Présentations interactives",
                width: 2131,
                height: 1421
              }
            ]}
          />



              <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              <div class="absolute bottom-0 left-0 right-0 p-4 text-white transform translate-y-full group-hover:translate-y-0 transition-transform duration-300">
                <p class="text-base font-semibold">Espaces d'échange</p>
                <p class="text-sm opacity-90">Networking et partage d'expériences</p>
              </div>
            </div>
          </div>
        </div>


      </div>
    </div>
  </section>
            </div>
          </div>
        </div>

        <!-- Stats sur une ligne avec style amélioré -->
        <div class="relative py-16 bg-[--ootb-turquoise] rounded-3xl overflow-hidden shadow-xl">
          <!-- Éléments décoratifs -->
          <div class="absolute inset-0 overflow-hidden">
            <div class="absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2"></div>
            <div class="absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full blur-2xl transform -translate-x-1/2 translate-y-1/2"></div>
            <!-- Icônes flottantes -->
            <div class="absolute w-8 h-8 top-[20%] left-[10%] text-white/20 animate-float">
              <Icon name="tabler:chart-dots" class="w-full h-full" />
            </div>
            <div class="absolute bottom-4 left-[30%] w-8 h-8 text-white/20 animate-float-delayed">
              <Icon name="tabler:chart-bar" class="w-full h-full" />
            </div>
          </div>

          <div class="relative z-10 grid grid-cols-2 md:grid-cols-4 gap-8 md:gap-12 max-w-6xl mx-auto">
            {[
              { number: '40+', label: 'conférences', icon: 'tabler:presentation' },
              { number: '20+', label: 'ateliers pratiques', icon: 'tabler:tool' },
              { number: '80+', label: 'intervenants', icon: 'tabler:users' },
              { number: '3000+', label: 'participants', icon: 'tabler:heart-handshake' }
            ].map(({ number, label, icon }) => (
              <div class="text-center transform hover:-translate-y-1 transition-all duration-300">
                <div class="mb-4">
                  <Icon name={icon} class="w-8 h-8 text-white/90 mx-auto" />
                </div>
                <div class="text-4xl md:text-5xl font-bold text-white mb-3">
                  {number}
                </div>
                <div class="text-xl md:text-2xl lg:text-3xl text-white/90 font-handwritten">
                  {label}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Programme du festival -->
  <section id="programme" class="pt-32 pb-8 bg-[color-mix(in_srgb,var(--ootb-orange)_5%,white)] relative overflow-hidden">
    <!-- Éléments décoratifs -->
    <div class="absolute inset-0">
      <div class="absolute top-0 left-0 w-96 h-96 bg-[--ootb-orange]/5 rounded-full blur-3xl transform -translate-x-1/3 -translate-y-1/3"></div>
      <div class="absolute bottom-0 right-0 w-80 h-80 bg-[--ootb-orange]/5 rounded-full blur-2xl transform translate-x-1/4 translate-y-1/4"></div>
    </div>

    <div class="max-w-6xl mx-auto px-4 sm:px-6">
        <div class="text-center mb-16 relative z-10">
          <SectionDivider variant="orange" class="mb-8">
            <Icon name="tabler:calendar" class="w-5 h-5" />
            <span>Planning</span>
          </SectionDivider>
          <h2 class="text-4xl md:text-5xl font-body font-bold mb-6 text-sky-900 tracking-tight">Programme du festival</h2>
          <p class="text-xl text-gray-600 max-w-2xl mx-auto font-light tracking-wide leading-relaxed">
            Découvrez toutes les conférences, ateliers et stands sur les 3 jours
          </p>
        </div>

        <div class="bg-white rounded-[32px] shadow-xl p-8 mb-16 transform hover:scale-[1.01] transition-all duration-300 relative z-10">
          <style>
            /* Style personnalisé pour les boutons du DayFilter */
            :global(.day-filter-button) {
              @apply border-2 border-gray-100 text-gray-600 px-6 py-3 rounded-xl
                hover:border-[#e4451e]/40 hover:text-[#e4451e] 
                transition-all duration-300 bg-white/80
                flex items-center gap-2 cursor-pointer;
            }
            :global(.day-filter-button.active) {
              @apply border-[#e4451e] text-[#e4451e] bg-white 
                font-medium shadow-sm ring-2 ring-[#e4451e]/10 ring-offset-2;
            }
            :global(.day-filter-button:hover) {
              @apply shadow-md bg-white transform -translate-y-[2px];
            }
            :global(.day-filter-button::before) {
              content: '';
              @apply w-2 h-2 rounded-full bg-current opacity-0 transition-opacity duration-300;
            }
            :global(.day-filter-button:hover::before) {
              @apply opacity-50;
            }
            :global(.day-filter-button.active::before) {
              @apply opacity-100;
            }

            /* Style pour la pagination */
            :global(.pagination-button) {
              @apply px-4 py-2 border border-gray-200 rounded-lg text-gray-600
                hover:border-[#e4451e]/40 hover:text-[#e4451e] 
                transition-all duration-300
                flex items-center gap-2;
            }
            :global(.pagination-button:disabled) {
              @apply opacity-50 cursor-not-allowed hover:border-gray-200 hover:text-gray-600;
            }
            :global(.pagination-info) {
              @apply text-sm text-gray-500 font-medium;
            }

            /* Réduction de la taille des images */
            :global(.event-image) {
              @apply w-24 h-24 rounded-xl object-cover;
            }

            /* Système typographique harmonisé */
            p:not(.hero-text) {
              color: #5d7186; /* Gris bleuté plus doux */
              @apply tracking-wide font-normal;
            }

            .hero-text {
              @apply text-white font-light tracking-wide;
            }

            h3 {
              @apply tracking-tight;
              color: #34495e;
              transition: color 0.3s ease;
            }
          </style>
          <DayFilter events={eventsByDay} />
        </div>

        <!-- Éléments décoratifs supplémentaires -->
        <div class="relative h-32 mb-8">
          <!-- Cercles décoratifs -->
          <div class="absolute bottom-0 left-1/4 w-48 h-48 bg-gradient-to-br from-white/20 to-white/5 rounded-full blur-2xl"></div>
          <div class="absolute bottom-8 right-1/3 w-32 h-32 bg-gradient-to-tl from-black/10 to-transparent rounded-full blur-xl"></div>
          <!-- Icônes flottantes supplémentaires -->
          <div class="absolute bottom-4 left-1/3 w-8 h-8 text-white/30 animate-float">
            <Icon name="tabler:calendar-stats" class="w-full h-full" />
          </div>
          <div class="absolute bottom-12 right-1/4 w-6 h-6 text-white/30 animate-float-delayed">
            <Icon name="tabler:calendar-time" class="w-full h-full" />
          </div>
        </div>
    </div>
  </section>

  <!-- Thèmes avec animation au scroll -->
  <section id="themes" class="relative py-24 bg-white overflow-hidden">
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute top-8 -right-4 w-[100px] h-[100px] md:w-[180px] md:h-[180px] z-20">
        <Image
          src={ootbLogo}
          alt=""
          class="w-full h-full object-contain transform scale-x-[-1] rotate-[-8deg] opacity-90"
          widths={[100, 180]}
          sizes="(max-width: 768px) 100px, 180px"
          aspectRatio="1:1"
          loading="lazy"
          decoding="async"
        />
      </div>
    </div>

    <div class="relative z-10 container mx-auto px-4">
      <div class="text-center mb-16">
        <SectionDivider variant="orange" class="mb-6">
          <Icon name="tabler:bulb" class="w-5 h-5" />
          Thématiques
        </SectionDivider>
        <h2 class="text-4xl md:text-5xl font-body font-bold mb-6 text-sky-900">Les grands thèmes du Festival</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-12">
          Découvrez les 5 axes principaux qui seront abordés lors du festival
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        {themes.map((theme) => (
          <div class="relative bg-[color-mix(in_srgb,var(--ootb-orange)_2%,white)] p-8 rounded-2xl shadow-md hover:shadow-lg transition-all duration-300 group transform hover:-translate-y-1 border border-[#e4451e]/5 overflow-hidden">
            <!-- Effet de brillance sur le hover -->
            <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transform -translate-x-full group-hover:translate-x-full transition-all duration-1000"></div>
            <div class="relative z-10">
              <div class="mb-6 transform group-hover:scale-110 transition-transform duration-300">
                <div class="w-14 h-14 bg-gradient-to-br from-[#e4451e] to-[#ff6b47] rounded-xl flex items-center justify-center relative shadow-lg">
                  <div class="absolute inset-0 bg-[#e4451e] rounded-xl opacity-20 animate-pulse"></div>
                  <Icon name={theme.icon} class="w-7 h-7 text-white relative z-10" />
                </div>
              </div>
              <h3 class="text-2xl font-bold text-gray-600 mb-4 group-hover:text-[#e4451e] transition-colors tracking-tight">{theme.title}</h3>
              <p class="text-[#4a5568] leading-relaxed font-normal tracking-wide">{theme.description}</p>
            </div>
            
            <!-- Effets décoratifs -->
            <div class="absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-[#e4451e]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <div class="absolute -bottom-2 -right-2 w-32 h-32 bg-[#e4451e]/5 rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-[#e4451e]/10 to-transparent rounded-bl-full transform scale-0 group-hover:scale-100 transition-transform duration-300"></div>
          </div>
        ))}
      </div>
    </div>
  </section>
</Layout>

<style>
  .bg-pattern {
    background-color: #f8f6f4;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e4451e' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2V6h4V4H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  }

  .festival-card {
    @apply bg-white/95 rounded-2xl shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-1;
    border: 1px solid rgba(255, 255, 255, 0.4);
  }

  .theme-title {
    color: #34495e;
    @apply tracking-tight transition-colors duration-300;
  }

  .theme-title:hover {
    color: #6ab29e;
  }

  .section-title {
    @apply tracking-tight;
    background: linear-gradient(135deg, #34495e 0%, #435e78 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .theme-description {
    color: #5d7186;
    @apply tracking-wide font-normal leading-relaxed;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  @keyframes float-delayed {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  .animate-float-delayed {
    animation: float-delayed 3s ease-in-out infinite;
    animation-delay: 1.5s;
  }
</style>

<script>
  // Animation au scroll pour les sections
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate-fade-in-up');
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('section').forEach(section => {
    observer.observe(section);
  });

  // Type declaration for the custom event
  interface DayChangeEvent extends CustomEvent {
    detail: string;
  }

  document.addEventListener('dayChange', ((event: DayChangeEvent) => {
    const selectedDay = event.detail;
    const items = document.querySelectorAll('[data-day]');
    
    items.forEach(item => {
      if (item.getAttribute('data-day') === selectedDay) {
        item.classList.remove('hidden');
      } else {
        item.classList.add('hidden');
      }
    });
  }) as EventListener);
</script> 