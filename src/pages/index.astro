---
import Layout from '~/layouts/PageLayout.astro';
import HeroSection from '~/components/sections/HeroSection.astro';
import MissionSection from '~/components/sections/MissionSection.astro';
import StatsSection from '~/components/sections/StatsSection.astro';
import FeaturedContentSection from '~/components/sections/FeaturedContentSection.astro';
import PremiumSection from '~/components/sections/PremiumSection.astro';
import NewsletterSection from '~/components/sections/NewsletterSection.astro';

import {
  heroContent,
  images,
  aboutFeatures,
} from '~/data/education';

// Import des données depuis les fichiers JSON gérés par Tina CMS
import homepageData from '../content/homepage/index.json';
import siteSettings from '../content/site/settings.json';

// Fusion des métadonnées globales et spécifiques à la page d'accueil
// Les métadonnées spécifiques ont priorité sur les métadonnées globales
const metadata = {
  title: homepageData.metadata?.title || siteSettings.seo.defaultTitle,
  description: homepageData.metadata?.description || siteSettings.seo.defaultDescription,
  image: homepageData.metadata?.image || siteSettings.seo.defaultSocialImage,
};
---

<Layout {metadata}>
  <HeroSection {...heroContent} scrollTargetId="mission-section" />
  
  <div class="w-full relative z-[100]">
    <MissionSection image={images.about} features={aboutFeatures} />
  </div>
  
  <div class="relative -mt-16 sm:-mt-20 md:-mt-24 pb-12 sm:pb-16 overflow-hidden">
    <StatsSection />
  </div>

  <FeaturedContentSection />

  <PremiumSection />

  <NewsletterSection />
</Layout>